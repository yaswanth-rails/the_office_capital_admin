<link href = "https://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css" rel = "stylesheet">
<script src = "https://code.jquery.com/jquery-1.10.2.js"></script>
<script src = "https://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>

<style type="text/css">
	.hidden {
		display: none;
	}
</style>

<div id="main_aadhar">

	<%= form_for @user ,url:job_applicant_aadhar_edit_path, method: :post,html: { multipart: true }, local: true, data: { turbo: false } do  |form|%>
		<div class="form-group row">
			<label for="aadhar_number" class="col-sm-2 col-form-label">Aadhar Number</label>
			<div class="col-sm-6">
				<% if @user.aadhar_status != "accepted"%>
				<%= form.text_field :aadhar_number,class:"form-control", required: true%>
				<%else%>
				<%=@user.aadhar_number%>
				<%end%>
			</div>
		</div>
	
		<div class="form-group row">
			<label for="aadhar" class="col-sm-2 col-form-label">Aadhar</label>
			<div class="col-sm-6">
				<% if @user.aadhar_status != "accepted"%>
					<%if @user.aadhar.present?%>
						<%=render partial: 'proof', locals: {value: @user.aadhar_url, form: @user, field_name: 'aadhar', model: 'job_applicant'}%>
						<%if @user.aadhar_status == "accepted"%>
							<%=render partial: 'job_download', locals: {value: @user.aadhar_url,filename: @user.aadhar_identifier , bucket: ENV["RESUME_BUCKET"] }%>
						<%end%>
					<%else%>
						<%= form.file_field :aadhar,class:"form-control"%>
					<%end%>
				<%else%>
					<%if @user.aadhar.present?%>
						<%=render partial: 'profile_pic', locals: {value: @user.aadhar_url}%>
						<%=render partial: 'job_download', locals: {value: @user.aadhar_url,filename: @user.aadhar_identifier , bucket: ENV["RESUME_BUCKET"] }%>
					<%end%>
				<%end%>
			</div>
		</div>

		<%if @user.aadhar_status == "rejected"%>
			<div class="form-group row">
				<label for="aadhar_rejected_reason" class="col-sm-2 col-form-label">Aadhar Reject Reason</label>
				<div class="col-sm-6">
					<h5 style="color: red"><%=@user.aadhar_rejected_reason%></h5>
				</div>
			</div>
		<%end%>
		<br>
		<div class="col-sm-2">
		</div>
		<div class="col-sm-6">
			<%if @user.aadhar_status != "accepted"%>
				<button type="submit" class="btn btn-primary btn-md">Submit</button>
				<button type="button" class="btn btn-primary btn-md" id ="reject">Change status</button>
			<%end%>
		</div>
	<%end%>
</div>

<div class="hidden" id="reason">
	<%= form_for @user ,url:job_applicant_change_proof_status_path(:proof=>"aadhar"), method: :post do  |form|%>
		<br>
		<div class=" form-group row">
			<label for="aadhar_status" class="col-sm-2 col-form-label">Select Status:</label>
			<div class="col-sm-6 ">
			<%= form.select :aadhar_status,["not uploaded","pending","accepted","rejected"],class: "form-control"%>
			</div>
		</div>
		<div class="form-group row hidden" id="reason1">
			<label for="aadhar_rejected_reason" class="col-sm-2 col-form-label">Aadhar Rejected Reason:</label>
			<div class="col-sm-6 " >
				<%= form.text_field :aadhar_rejected_reason,class: "form-control"%>
			<br>
			</div>
		</div>
		<div class="form-group row">
			<label for="aadhar_status_alert" class="col-sm-2 col-form-label">Send Aadhar status alert email to applicant:</label>
			<div class="col-sm-6">
				<%= form.check_box :aadhar_status_alert%>
			</div>
		</div>
		<div class="col-sm-6">
			<%= form.submit "Submit",class: "btn btn-primary btn-md"%>
			<%= link_to "Back", job_applicant_aadhar_edit_path(model_name: 'JobApplicant', id: @user.id),class: "btn btn-primary btn-md" %>
		</div>
	<%end%>
</div>

<script type="text/javascript">

$(document).ready(function() {
	$("#reject").on("click",function() {
		$("#reason").removeClass("hidden");
		$("#reject").addClass("hidden");
		$("#main_aadhar").addClass("hidden");
		$("#job_applicant_aadhar_status").on("change",function() {
		var value1 = $(this).val()
		if (value1=="rejected"){ 
			$("#reason1").removeClass("hidden");
		}
		else{
			$("#reason1").addClass("hidden");
		}
	})
	})
});
</script>